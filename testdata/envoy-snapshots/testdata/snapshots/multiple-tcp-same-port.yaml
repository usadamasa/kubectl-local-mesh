overload_manager:
    refresh_interval:
        nanos: 250000000
        seconds: 0
    resource_monitors:
        - name: envoy.resource_monitors.global_downstream_max_connections
          typed_config:
            '@type': type.googleapis.com/envoy.extensions.resource_monitors.downstream_connections.v3.DownstreamConnectionsConfig
            max_active_downstream_connections: 5000
static_resources:
    clusters:
        - connect_timeout: 1s
          load_assignment:
            cluster_name: tcp_primary_10_0_0_1_5432
            endpoints:
                - lb_endpoints:
                    - endpoint:
                        address:
                            socket_address:
                                address: 127.0.0.1
                                port_value: 10000
          name: tcp_primary_10_0_0_1_5432
          type: STATIC
        - connect_timeout: 1s
          load_assignment:
            cluster_name: tcp_primary_10_0_0_2_5432
            endpoints:
                - lb_endpoints:
                    - endpoint:
                        address:
                            socket_address:
                                address: 127.0.0.1
                                port_value: 10001
          name: tcp_primary_10_0_0_2_5432
          type: STATIC
    listeners:
        - address:
            socket_address:
                address: 0.0.0.0
                port_value: 5432
          enable_reuse_port:
            value: false
          filter_chains:
            - filters:
                - name: envoy.filters.network.tcp_proxy
                  typed_config:
                    '@type': type.googleapis.com/envoy.extensions.filters.network.tcp_proxy.v3.TcpProxy
                    cluster: tcp_primary_10_0_0_1_5432
                    stat_prefix: tcp_tcp_primary_10_0_0_1_5432
          name: listener_tcp_tcp_primary_10_0_0_1_5432
        - address:
            socket_address:
                address: 0.0.0.0
                port_value: 5432
          enable_reuse_port:
            value: false
          filter_chains:
            - filters:
                - name: envoy.filters.network.tcp_proxy
                  typed_config:
                    '@type': type.googleapis.com/envoy.extensions.filters.network.tcp_proxy.v3.TcpProxy
                    cluster: tcp_primary_10_0_0_2_5432
                    stat_prefix: tcp_tcp_primary_10_0_0_2_5432
          name: listener_tcp_tcp_primary_10_0_0_2_5432
